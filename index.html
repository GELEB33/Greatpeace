<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ò–≥—Ä–∞: –ú–∏—Ä –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–π</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: Arial, sans-serif;
      user-select: none; /* –ó–∞–ø—Ä–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –∏ —ç–º–æ–¥–∑–∏ */
    }

    /* –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é */
    .main-menu {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: linear-gradient(135deg, #2c3e50, #3498db);
      color: white;
      text-align: center;
    }

    .main-menu button {
      padding: 15px 30px;
      font-size: 20px;
      background-color: #e74c3c;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .main-menu button:hover {
      background-color: #c0392b;
    }

    /* –ò–≥—Ä–æ–≤–∞—è –∫–∞—Ä—Ç–∞ */
    .game-container {
      display: none;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      position: relative;
      background-color: #87CEEB; /* –ù–µ–∂–Ω–æ-—Å–∏–Ω–∏–π —Ñ–æ–Ω, –∫–∞–∫ –º–æ—Ä–µ */
    }

    .map {
      display: grid;
      grid-template-columns: repeat(50, 40px);
      grid-template-rows: repeat(50, 40px);
      gap: 2px;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      touch-action: none;
      background-color: #4CAF50; /* –¶–≤–µ—Ç —Ä–∞–≤–Ω–∏–Ω */
      border: 5px solid #1E90FF; /* –ì—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ä—Ç—ã, –∫–∞–∫ –±–µ—Ä–µ–≥ –º–æ—Ä—è */
    }

    .tile {
      width: 40px;
      height: 40px;
      background-color: #4CAF50; /* –†–∞–≤–Ω–∏–Ω—ã */
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-sizing: border-box;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 20px;
    }

    .tile.river {
      background-color: #2196F3; /* –†–µ–∫–∏ */
    }

    .tile.mountain {
      background-color: #808080; /* –ì–æ—Ä—ã (—Å–µ—Ä—ã–µ) */
    }

    .tile.forest {
      background-color: #388E3C; /* –õ–µ—Å–∞ */
    }

    /* –°—Ç—Ä–µ–ª–∫–∏ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è */
    .arrow {
      position: absolute;
      font-size: 40px;
      color: white;
      cursor: pointer;
      user-select: none;
      background-color: rgba(0, 0, 0, 0.5);
      border-radius: 50%;
      padding: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .arrow.up {
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
    }

    .arrow.down {
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      height: 60px; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –æ–±–ª–∞—Å—Ç—å –Ω–∞–∂–∞—Ç–∏—è */
    }

    .arrow.left {
      top: 50%;
      left: 10px;
      transform: translateY(-50%);
    }

    .arrow.right {
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
    }

    /* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑—É–º–æ–º */
    .zoom-controls {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 100px; /* –†–∞–∑–¥–≤–∏–≥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –≤ —Å—Ç–æ—Ä–æ–Ω—ã */
    }

    .zoom-controls button {
      padding: 10px 20px;
      font-size: 20px;
      background-color: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .zoom-controls button:hover {
      background-color: rgba(0, 0, 0, 0.8);
    }
  </style>
</head>
<body>
  <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
  <div class="main-menu" id="main-menu">
    <div>
      <h1>–ú–∏—Ä –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–π</h1>
      <button id="play-button">–ò–≥—Ä–∞—Ç—å</button>
    </div>
  </div>

  <!-- –ò–≥—Ä–æ–≤–∞—è –∫–∞—Ä—Ç–∞ -->
  <div class="game-container" id="game-container">
    <div class="map" id="map"></div>
    <!-- –°—Ç—Ä–µ–ª–∫–∏ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è -->
    <div class="arrow up" id="arrow-up">‚Üë</div>
    <div class="arrow down" id="arrow-down">‚Üì</div>
    <div class="arrow left" id="arrow-left">‚Üê</div>
    <div class="arrow right" id="arrow-right">‚Üí</div>
    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑—É–º–æ–º -->
    <div class="zoom-controls">
      <button id="zoom-in">+</button>
      <button id="zoom-out">-</button>
    </div>
  </div>

  <script>
    // –≠–ª–µ–º–µ–Ω—Ç—ã
    const mainMenu = document.getElementById('main-menu');
    const gameContainer = document.getElementById('game-container');
    const map = document.getElementById('map');
    const playButton = document.getElementById('play-button');
    const arrowUp = document.getElementById('arrow-up');
    const arrowDown = document.getElementById('arrow-down');
    const arrowLeft = document.getElementById('arrow-left');
    const arrowRight = document.getElementById('arrow-right');
    const zoomIn = document.getElementById('zoom-in');
    const zoomOut = document.getElementById('zoom-out');

    // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ–π
    let offsetX = 0;
    let offsetY = 0;
    const moveSpeed = 20;
    let scale = 1;
    let isMoving = false;
    let moveInterval;

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç—ã
    function generateMap() {
      // –°–Ω–∞—á–∞–ª–∞ –∑–∞–ø–æ–ª–Ω—è–µ–º –≤—Å—é –∫–∞—Ä—Ç—É —Ä–∞–≤–Ω–∏–Ω–∞–º–∏
      for (let y = 0; y < 50; y++) {
        for (let x = 0; x < 50; x++) {
          const tile = document.createElement('div');
          tile.classList.add('tile');
          map.appendChild(tile);
        }
      }

      // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫ (–º–∏–Ω–∏–º—É–º 4 –∫–ª–µ—Ç–∫–∏)
      generateTerrain('river', 4, 0.02);

      // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–æ—Ä (–∫—É—á–∫–∞–º–∏, –º–∏–Ω–∏–º—É–º 6 –∫–ª–µ—Ç–æ–∫)
      generateTerrain('mountain', 6, 0.01, true); // –ì–æ—Ä—ã —Ç–µ–ø–µ—Ä—å –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∫—É—á–∫–∞–º–∏

      // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–µ—Å–æ–≤ (–º–∏–Ω–∏–º—É–º 2 –∫–ª–µ—Ç–∫–∏)
      generateTerrain('forest', 2, 0.1);
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥—Ä—É–ø–ø –∫–ª–µ—Ç–æ–∫ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –º–µ—Å—Ç–Ω–æ—Å—Ç–∏
    function generateTerrain(type, minSize, spawnChance, isCluster = false) {
      for (let y = 0; y < 50; y++) {
        for (let x = 0; x < 50; x++) {
          if (Math.random() < spawnChance) {
            const size = Math.floor(Math.random() * 3) + minSize; // –†–∞–∑–º–µ—Ä –≥—Ä—É–ø–ø—ã
            if (isCluster) {
              // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–æ—Ä –∫—É—á–∫–∞–º–∏
              generateCluster(x, y, size, type);
            } else {
              // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫ –∏ –ª–µ—Å–æ–≤ –ø–æ–ª–æ—Å–∫–∞–º–∏
              const direction = Math.random() < 0.5 ? 'horizontal' : 'vertical'; // –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
              for (let i = 0; i < size; i++) {
                const tileX = direction === 'horizontal' ? x + i : x;
                const tileY = direction === 'vertical' ? y + i : y;
                if (tileX < 50 && tileY < 50) {
                  const tile = map.children[tileY * 50 + tileX];
                  if (!tile.classList.contains('river') && !tile.classList.contains('mountain') && !tile.classList.contains('forest')) {
                    tile.classList.add(type);
                    if (type === 'forest') tile.textContent = ['üå≥', 'üå≤', 'üå¥'][Math.floor(Math.random() * 3)];
                  }
                }
              }
            }
          }
        }
      }
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫—É—á–∫–∏ (–¥–ª—è –≥–æ—Ä)
    function generateCluster(startX, startY, size, type) {
      for (let i = 0; i < size; i++) {
        const tileX = startX + Math.floor(Math.random() * 3) - 1; // –°–ª—É—á–∞–π–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ –ø–æ X
        const tileY = startY + Math.floor(Math.random() * 3) - 1; // –°–ª—É—á–∞–π–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ –ø–æ Y
        if (tileX >= 0 && tileX < 50 && tileY >= 0 && tileY < 50) {
          const tile = map.children[tileY * 50 + tileX];
          if (!tile.classList.contains('river') && !tile.classList.contains('mountain') && !tile.classList.contains('forest')) {
            tile.classList.add(type);
            tile.textContent = 'üóª'; // –≠–º–æ–¥–∑–∏ –¥–ª—è –≥–æ—Ä
          }
        }
      }
    }

    // –ü–µ—Ä–µ—Ö–æ–¥ –≤ –∏–≥—Ä—É
    playButton.addEventListener('click', () => {
      mainMenu.style.display = 'none';
      gameContainer.style.display = 'block';
      generateMap();
    });

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ–π —Å –ø–æ–º–æ—â—å—é —Å—Ç—Ä–µ–ª–æ–∫ (–∑–∞–∂–∞—Ç–∏–µ)
    function startMoving(direction) {
      if (isMoving) return;
      isMoving = true;
      moveInterval = setInterval(() => {
        if (direction === 'up') offsetY += moveSpeed;
        else if (direction === 'down') offsetY -= moveSpeed;
        else if (direction === 'left') offsetX += moveSpeed;
        else if (direction === 'right') offsetX -= moveSpeed;
        updateMapTransform();
      }, 50);
    }

    function stopMoving() {
      isMoving = false;
      clearInterval(moveInterval);
    }

    arrowUp.addEventListener('mousedown', () => startMoving('up'));
    arrowDown.addEventListener('mousedown', () => startMoving('down'));
    arrowLeft.addEventListener('mousedown', () => startMoving('left'));
    arrowRight.addEventListener('mousedown', () => startMoving('right'));

    arrowUp.addEventListener('mouseup', stopMoving);
    arrowDown.addEventListener('mouseup', stopMoving);
    arrowLeft.addEventListener('mouseup', stopMoving);
    arrowRight.addEventListener('mouseup', stopMoving);

    arrowUp.addEventListener('mouseleave', stopMoving);
    arrowDown.addEventListener('mouseleave', stopMoving);
    arrowLeft.addEventListener('mouseleave', stopMoving);
    arrowRight.addEventListener('mouseleave', stopMoving);

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑—É–º–æ–º
    zoomIn.addEventListener('click', () => {
      scale *= 1.1;
      updateMapTransform();
    });

    zoomOut.addEventListener('click', () => {
      scale /= 1.1;
      updateMapTransform();
    });

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∫–∞—Ä—Ç—ã
    function updateMapTransform() {
      map.style.transform = `translate(${offsetX}px, ${offsetY}px) scale(${scale})`;
    }
  </script>
</body>
</html>
